<!DOCTYPE html>
<html>
<head>
    <style>
        body {
        font-family: Calibri, sans-serif; /* Specify Calibri as the preferred font */
        }
    img.center {
        display: block;
        margin: 0 auto; /* This centers the image horizontally */
    }
    .parameter-column {
    background-color: #f9f9f9; /* Light gray background color */
}
        .section-label {
        text-align: center;
        background-color: #e40a2cff;
        color: white;
        padding: 5px 10px;
        border-radius: 15px;
        margin: 10px auto;
        /* width: fit-content; Remove fixed width */
        border: 0px solid #093c71ff;
        }
        .container {
            text-align: center;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .parameter-container {
            text-align: center;
            margin-bottom: 10px;
        }
        .parameter-label {
            width: 150px;
            text-align: left;
            margin-right: 10px;
            display: inline-block;
        }
        .parameter-input {
            text-align: center;
            width: calc(100% - 170px);
        }
        .output-parameter {
            margin-bottom: 5px;
        }
        .styled-button {
            background-color: #093c71ff;
            color: #fff;
            padding: 5px 10px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.5s ease;
            display: block;
            margin: 0 auto;
            width: fit-content;
            border: 0px solid #e40a2cff;
        }
        .styled-button:hover {
            background-color: #e40a2cff;
        }
        .equation-container {
            padding: 5px;
            border-radius: 20px;
            line-height: 1.5;
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        .reference-container {
            margin-top: 20px;
        }
        .reference-container p {
            font-size: 12px;
        }
        @media screen and (max-width: 840px) {
            .parameter-label {
            width: 150px;
            text-align: right;
            margin-right: 10px;
            display: inline-block;
        }
            .parameter-input {
                width: calc(100% - 170px);
            }
        }
    </style>
</head>
<body>
    <p style="color: red;">This tool is designed for research purposes only and should not be considered a medical device. It is intended solely for educational and investigational use. Any information provided by this tool is not intended for medical diagnosis, treatment, or prescription. Users should consult qualified healthcare professionals for any medical concerns or decisions. The creators of this tool bear no responsibility for its misuse or misinterpretation.</p>
    <p><strong><img src="image.png" alt="" class="center" width="600" height="300" /></strong></p>
    <h2 style="font-weight: 400; text-align: center;">Non-invasive Echocardiographic Hemodynamic Calculator</h2>
    
    <div class="section-label">Variables</div>
<div id="content-container">
    <div id="input-column">
<div class="clearfix">
    <div class="parameter-container">
        <label for="Height" class="parameter-label">Height (cm):</label>
        <input type="number" id="Height" min="0" max="300" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="Weight" class="parameter-label">Weight (kg):</label>
        <input type="number" id="Weight" min="0" max="400" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="HR" class="parameter-label">HR (bpm):</label>
        <input type="number" id="HR" min="0" max="300" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="LVOTd" class="parameter-label">LVOT diameter (mm):</label>
        <input type="number" id="LVOTd" min="0" max="200" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="LVOT_VTI" class="parameter-label">LVOT-VTI (cm):</label>
        <input type="number" id="LVOT_VTI" min="0" max="200" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="EF" class="parameter-label">LVEF (%):</label>
        <input type="number" id="EF" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="E_over_e" class="parameter-label">E/e':</label>
        <input type="number" id="E_over_e" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="LAVi" class="parameter-label">LAVi (mL/m<sup>2</sup> ):</label>
        <input type="number" id="LAVi" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="RVEDA" class="parameter-label">RV EDA (cm<sup>2</sup> ):</label>
        <input type="number" id="RVEDA" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="RVESA" class="parameter-label">RV ESA (cm<sup>2</sup> ):</label>
        <input type="number" id="RVESA" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="TRV" class="parameter-label">TRV (cm/s):</label>
        <input type="number" id="TRV" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="PREDV" class="parameter-label">PREDV (cm/s):</label>
        <input type="number" id="PREDV" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="IVC" class="parameter-label">IVC max diameter (mm):</label>
        <input type="number" id="IVC" min="0" max="999" value="0" class="parameter-input" style="width: 100px;">
    </div>
    <div class="parameter-container">
        <label for="IVCC" class="parameter-label">IVC collapsibility (0 if >50%, 1 if <50%):</label>
        <input type="number" id="IVCC" min="0" max="1" value="0" class="parameter-input" style="width: 100px;">
    </div>
</div>
<div id="warning-message" style="color: red; text-align: center;">
    <p>Ensure accurate entry of values (appropriate units) for each variable </p>
    <p>It's advisable to input zero for missing data to maintain consistency and accuracy in calculations.</p>
</div>
<button class="styled-button" onclick="calculate()">Calculate</button>
</div>

    
    <div class="container">
        <div class="section-label">Output</div>
        <div class="output-container">
        <div class="output-parameter" id="RAP">RAP</div>
        <div class="output-parameter" id="SV">SV</div>
        <div class="output-parameter" id="SVI">SVi</div>
        <div class="output-parameter" id="CO">CO</div>
        <div class="output-parameter" id="CI">CI</div>
        <div class="output-parameter" id="PAPs">sPAP</div>
        <div class="output-parameter" id="PAPd">dPAP</div>
        <div class="output-parameter" id="PAPm">mPAP</div>
        <div class="output-parameter" id="PCWP">PCWP</div>
        <div class="output-parameter" id="PVR">PVR</div>
    </div>
    </div>
    <div class="Reference values">
    <div class="section-label">Reference values</div>
    <div class="reference-container">
        <p style="text-align: center;"> RAP &le; 5 mmHg (3)</p>
        <p style="text-align: center;">SV = 60-100 mL (4)</p>
        <p style="text-align: center;">SVi = 33-47 mL/m2 (4)</p>
        <p style="text-align: center;">CO = 4-8 L/min (4)</p>
        <p style="text-align: center;">CI &gt; 2.2 L/min/m2 (4)</p>
        <p style="text-align: center;">sPAP =15-30 mmHg (4)</p>
        <p style="text-align: center;">dPAP = 4-12 mmHg (4)</p>
        <p style="text-align: center;">mPAP = 8-20 mmHg (4)</p>
        <p style="text-align: center;">PCWP &le; 15 mmHg (4)</p>
        <p style="text-align: center;">PVR &le; 2 WU (4)</p>
            </div>
    </div>
    
    <div class="container">
        <div class="section-label">Equations</div>
        <div class="equation-container">
           <p style="text-align: center;">BSA (Du Bois formula) = 0.007184 &times; Weight<sup>0.425</sup> &times; Height<sup>0.725</sup></p>
<p style="text-align: center;"> SV = 0.785 &times; LVOTd<sup>2</sup> &times; LVOT-VTI<sup>(1)</sup></p>
<p style="text-align: center;">SVi = SV/BSA</p>
<p style="text-align: center;">CO = SV &times; HR (1)</p>
<p style="text-align: center;">CI = CO/BSA</p>
<p style="text-align: center;">RVFAC = ((RV EDA - RV ESA) / RV EDA) * 100</p>
<p style="text-align: cecenternter;">PCWP = (43 - 0.1 &times; TRV - 0.5 &times; LVEF + 1.0 &times; RVFAC + 0.3 &times; LAVi + 0.7 &times; E/e&rsquo; + 0.9 &times; IVCd) &times; mPAP &divide; 100 <sup>(2)</sup></p>
<p style="text-align: center;"> Simplified equations (PCWP) <sup>(2)</sup> = (52 - 0.5 &times; LVEF - 0.1 &times; TRV + 0.8 &times; E/e' + 1.0 &times; RVFAC + 1.1 &times; IVCd) &times; mPAP &divide; 100</p>
<p style="text-align: center;">(83 - 0.6 &times; LVEF - 0.1 &times; TRV + 0.9 &times; E/e' + 0.75 &times; RVFAC) &times; mPAP &divide; 100</p>
<p style="text-align: center;"> (120 - 0.5 &times; LVEF - 0.2 &times; TRV + 0.9 &times; E/e&rsquo;) &times; mPAP &divide; 100</p>
<p style="text-align: center;"> (94 - 0.8 &times; LVEF) &times; mPAP &divide; 100</p>
<p style="text-align: center;">sPAP = 4 &times; TRV<sup>2</sup> + RAP <sup>(3)</sup></p>
<p style="text-align: center;">dPAP = 4 &times; PR-EDV<sup>2</sup> + RAP <sup>(3)</sup></p>
<p style="text-align: center;">mPAP = (sPAP+2&times;dPAP)&divide;3 <sup>(3)</sup></p>
<p style="text-align: center;">PVR = (mPAP - PCWP) &divide; CO <sup>(2)</sup></p>
<p style="text-align: center;">RAP = 5 mmHg if IVCd &le;21 mm and IVC collapsibility &gt;50%
    <br>
    <p style="text-align: center;"> 8 mmHg if IVCd &le;21 mm and IVC collapsibility &lt;50%, 
    <br>
    <p style="text-align: center;"> or if IVCd &gt;21 mm and IVC collapsibility &gt;50% 
    <br>
    <p style="text-align: center;"> 15 mmHg if IVCd &gt;21 mm and IVC collapsibility &lt;50% (3)</p>
        </div>
    </div>
    
    <div class="container">
        <div class="section-label">References</div>
        <div class="reference-container">
            <div style="text-align: center; font-size: 12px;">
    <p>(1) doi: <a href="https://doi.org/10.1161/01.cir.70.3.425">https://doi.org/10.1161/01.cir.70.3.425</a>. PMID: 6744546.</p>
    <p>(2) doi: <a href="https://doi.org/10.1002/ehf2.13183">https://doi.org/10.1002/ehf2.13183</a>. PMID: 33566429; PMCID: PMC8006655.</p>
    <p>(3) doi: <a href="https://doi.org/10.1016/j.echo.2010.05.010">https://doi.org/10.1016/j.echo.2010.05.010</a>. PMID: 20620859.</p>
    <p>(4) doi: <a href="https://doi.org/10.1093/eurheartj/ehac237">https://doi.org/10.1093/eurheartj/ehac237</a>. PMID: 36017548.</p>
</div>
        </div>
    </div>

<div class="section-label">Abbreviations</div>
<p style="text-align: center; font-size: 12px;"> CI: cardiac index; CO: cardiac output; dPAP: diastolic pulmonary artery pressure; HR heart rate; IVCd: inferior vena cava diameter; LAVi: left atrial volume index; LVEF: left ventricular ejection fraction; LVOT: left ventricular outflow tract; mPAP: mean pulmonary artery pressure; RAP: right atrial pressure; RV EDA: right ventricular end-diastolic area, RV ESA: right ventricular end sistolic area, RV FAC: right ventricle fractional area change; PCWP: pulmonary capillary wedge pressure; PR-EDV: pulmonary regurgitation end diastolic velocity; sPAP: systolic pulmonary artery pressure; SV: stroke volume; SVi: stroke volume index; TRV: tricuspid regurgitation velocity; VTI: velocity time integral.</p>
    </div>

<script>
    function calculate() {
    var Height = parseFloat(document.getElementById('Height').value);
    var TRV = parseFloat(document.getElementById('TRV').value);
    var PREDV = parseFloat(document.getElementById('PREDV').value);
    var Weight = parseFloat(document.getElementById('Weight').value);
    var HR = parseFloat(document.getElementById('HR').value); 
    var LVOTd = parseFloat(document.getElementById('LVOTd').value);
    var LVOT_VTI = parseFloat(document.getElementById('LVOT_VTI').value) / 100;
    var EF = parseFloat(document.getElementById('EF').value);
    var E_over_e = parseFloat(document.getElementById('E_over_e').value);
    var LAVi = parseFloat(document.getElementById('LAVi').value);
    var RVEDA = parseFloat(document.getElementById('RVEDA').value);
    var RVESA = parseFloat(document.getElementById('RVESA').value);
    var IVC = parseFloat(document.getElementById('IVC').value);
    var IVCC = parseFloat(document.getElementById('IVCC').value);

    // Check for NaN values
    if (isNaN(Height) || isNaN(Weight) || isNaN(HR) || isNaN(LVOTd) || isNaN(LVOT_VTI) || isNaN(EF) || isNaN(E_over_e) || isNaN(LAVi) || isNaN(RVEDA) || isNaN(RVESA) || isNaN(TRV) || isNaN(PREDV) || isNaN(IVC) || isNaN(IVCC)) {
        alert("Please enter valid numeric values for all input fields.");
        return;
    }
        
    // Calculate body surface area (SBA)
    var SBA = 0.007184 * Math.pow(Weight, 0.425) * Math.pow(Height, 0.725);
    
  
    if (LVOT_VTI === 0 || LVOTd === 0) {
    // Set SV, SVI, CO, and PVR to NaN
    document.getElementById('SV').innerText = 'SV: N/A';
    document.getElementById('SVI').innerText = 'SVI: N/A';
    document.getElementById('CO').innerText = 'CO: N/A';
    document.getElementById('CI').innerText = 'CI: N/A';
} else {
    // Calculate stroke volume (SV)
    var SV = (LVOT_VTI * Math.PI * Math.pow(LVOTd / 2, 2)).toFixed(1);
    document.getElementById('SV').innerText = 'SV: ' + SV + ' mL';
    if (SV >= 60 && SV <= 100) {
        document.getElementById('SV').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('SV').style.color = 'red'; // Set color to red
    }

    // Calculate stroke volume index (SVI)
    var SVI = (SV / SBA).toFixed(1);
    document.getElementById('SVI').innerHTML = 'SVI: ' + SVI + ' mL/m<sup>2</sup>';
    if (SVI >= 33 && SVI <= 47) {
        document.getElementById('SVI').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('SVI').style.color = 'red'; // Set color to red
    }

    // Calculate cardiac output (CO)
    var CO = ((SV * HR) / 1000).toFixed(1);
    document.getElementById('CO').innerText = 'CO: ' + CO + ' L/min';
    if (CO >= 4 && CO <= 8) {
        document.getElementById('CO').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('CO').style.color = 'red'; // Set color to red
    }
    
// Calculate CI 
    var CI = (CO / SBA).toFixed(1);
    document.getElementById('CI').innerHTML = 'CI: ' + CI + ' L/min/m<sup>2</sup>';
    if (CI > 2.2) {
        document.getElementById('CI').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('CI').style.color = 'red'; // Set color to red
    }
}

    // Check if IVC is equal to zero
    if (IVC === 0) {
        // Set all related parameters to zero or empty
        document.getElementById('RAP').innerText = 'RAP: N/A';
        document.getElementById('RAP').style.color = 'black';
        
    } else {

    // Calculate RAP based on IVCd and IVC collapsibility
    if (IVC <= 21) {
        if (IVCC == 0) {
            RAP = 5;
        } else {
            RAP = 8;
        }
    } else {
        if (IVCC == 0) {
            RAP = 8;
        } else {
            RAP = 15;
        }
    }
    document.getElementById('RAP').innerText = 'RAP: ' + RAP.toFixed(1) +'mmHg';
    if (RAP <= 5) {
        document.getElementById('RAP').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('RAP').style.color = 'red'; // Set color to red
    }
    }
    
     if (TRV === 0) {
                     
                     document.getElementById('PAPs').innerText = 'sPAP: N/A';
                      document.getElementById('PAPs').style.color = 'black';
    } else {
    // Calculate PAPs (Pulmonary artery pressure systolic)
    var PAPs = (4 * Math.pow(TRV/100, 2) + RAP).toFixed(1);
    document.getElementById('PAPs').innerText = 'sPAP: ' + PAPs + ' mmHg';
    if (PAPs >= 15 && PAPs <= 30) {
        document.getElementById('PAPs').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('PAPs').style.color = 'red'; // Set color to red
    }
    }
    
     if (PREDV === 0) {
                     
                     document.getElementById('PAPd').innerText = 'dPAP: N/A';
                     document.getElementById('PAPd').style.color = 'black';
    } else {
    // Calculate PAPd (Pulmonary artery pressure diastolic)
    var PAPd = (4 * Math.pow(PREDV/100, 2)+ RAP).toFixed(1);
    document.getElementById('PAPd').innerText = 'dPAP: ' + PAPd + ' mmHg';
    if (PAPd >= 4 && PAPd <= 12) {
        document.getElementById('PAPd').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('PAPd').style.color = 'red'; // Set color to red
    }
    }

// Calculate PAPm (Pulmonary artery pressure mean)
var PAPm;
if (PAPs === 0 && PAPd === 0) {
    PAPm = 'N/A';
} else {
    PAPm = ((parseFloat(PAPs) + 2 * parseFloat(PAPd)) / 3).toFixed(1);
}

if (isNaN(parseFloat(PAPm))) {
    document.getElementById('PAPm').innerText = 'mPAP: ' + PAPm;
    document.getElementById('PAPm').style.color = 'black'; // Set color to black
} else {
    document.getElementById('PAPm').innerText = 'mPAP: ' + PAPm + ' mmHg';
    if (PAPm >= 8 && PAPm <= 20) {
        document.getElementById('PAPm').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('PAPm').style.color = 'red'; // Set color to red
    }
}

  var PCWP;

// Check if RVEDA and RVESA are not zero before calculating RVFAC
if (RVEDA !== 0 && RVESA !== 0) {
    // Calculate the RVFAC parameter (%)
    var RVFAC = ((RVEDA - RVESA) / RVEDA) * 100; // Calculate RV FAC as a percentage

    // Determine the scenario for calculating PCWP based on input variables
    switch (true) {
        case (EF !== 0 && TRV !== 0 && E_over_e !== 0 && RVFAC !== 0 && IVC !== 0 && LAVi !== 0):
            PCWP = ((43 - 0.1 * TRV - 0.5 * EF + 1.0 * RVFAC + 0.3 * LAVi + 0.7 * E_over_e + 0.9 * IVC) * PAPm / 100).toFixed(1);
            break;
        case (EF !== 0 && TRV !== 0 && E_over_e !== 0 && RVFAC !== 0 && IVC !== 0):
            PCWP = ((52 - 0.5 * EF - 0.1 * TRV + 0.8 * E_over_e + 1.0 * RVFAC + 1.1 * IVC) * PAPm / 100).toFixed(1);
            break;
        case (EF !== 0 && TRV !== 0 && E_over_e !== 0 && RVFAC !== 0):
            PCWP = ((83 - 0.6 * EF - 0.1 * TRV + 0.9 * E_over_e + 0.75 * RVFAC) * PAPm / 100).toFixed(1);
            break;
        default:
            PCWP = "Unable to calculate PCWP";
            break;
    }
} else {
    switch (true) {
        case (EF !== 0 && TRV !== 0 && E_over_e !== 0):
            PCWP = ((120 - 0.5 * EF - 0.2 * TRV + 0.9 * E_over_e) * PAPm / 100).toFixed(1);
            break;
        case (EF !== 0 && TRV !== 0):
            PCWP = ((133 - 0.6 * EF - 0.2 * TRV) * PAPm / 100).toFixed(1);
            break;
        case (EF !== 0):
            PCWP = ((94 - 0.8 * EF) * PAPm / 100).toFixed(1);
            break;
        default:
            PCWP = "Unable to calculate PCWP";
            break;
    }
}
    
    // Display PCWP result
if (isNaN(PCWP)) {
    document.getElementById('PCWP').innerText = 'PCWP: N/A';
    document.getElementById('PAPm').style.color = 'black';
} else {
    document.getElementById('PCWP').innerText = 'PCWP: ' + PCWP + ' mmHg';
    if (PCWP <= 15) {
        document.getElementById('PCWP').style.color = 'green'; // Set color to green
    } else {
        document.getElementById('PCWP').style.color = 'red'; // Set color to red
    }
}


    // Calculate PVR (Pulmonary vascular resistance)
var PVR;
if (isNaN(PAPm) || isNaN(PCWP) || isNaN(CO)) {
    PVR = 'N/A';
} else {
    PVR = ((PAPm - PCWP) / CO).toFixed(3);
}

    if (PVR === 'N/A') {
    document.getElementById('PVR').innerText = 'PVR: ' + PVR;
    document.getElementById('PVR').style.color = 'black'; // Set color to black
    } else {
    document.getElementById('PVR').innerText = 'PVR: ' + PVR + ' WU';
        if (PVR <= 2) {
        document.getElementById('PVR').style.color = 'green'; // Set color to green
        } else {
        document.getElementById('PVR').style.color = 'red'; // Set color to red
            }
        }
        
    }
</script>

</body>
</html>
